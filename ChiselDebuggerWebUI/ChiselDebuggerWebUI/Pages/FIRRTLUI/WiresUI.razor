<svg class="wiresContainer">
    @foreach (var wireGroup in WirePaths.GroupBy(x => x.GetEndIO()))
    {
        <g>
            @foreach (var wire in wireGroup)
            {
                <path class="wireHoverArea" d="@wire.ToSVGPathString()" fill="none" />
                <path class="wireElement wire" d="@wire.ToSVGPathString()" fill="none" />

                @if (wire.StartsFromWire)
                {
                    <line class="wireElement wireConnection" x1="@wire.GetEndPos().X" y1="@wire.GetEndPos().Y" x2="@wire.GetEndPos().X" y2="@wire.GetEndPos().Y" />
                }
            }

        </g>
    }
</svg>

@code 
{
    [Parameter]
    public ModuleController ModCtrl { get; set; }

    private List<WirePath> WirePaths = new List<WirePath>();

    protected override Task OnParametersSetAsync()
    {
        ModCtrl.OnWiresRouted += UpdateWires;

        return base.OnParametersSetAsync();
    }

    private void UpdateWires(List<WirePath> wirePaths)
    {
        WirePaths = wirePaths;
        StateHasChanged();
    }
}
